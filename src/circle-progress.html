<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
	<title></title>
	<script type="text/javascript" src="src/vue.js"></script>
</head>
<body>
	<div id="app_circle_group">
		<circle-component ref="cp1" v_color_b="#0060b6" v_color_f="#75cfff" v_color_content="#fff" v_size="80" v_border="8" v_data="30" v_animate_speed="20"></circle-component>
		<br/>
		<circle-component ref="cp2" v_color_b="#0060b6" v_color_f="#75cfff" v_color_content="#fff" v_size="100" v_border="8" v_data="50" v_animate_speed="20"></circle-component>
		<br/>
		<circle-component ref="cp3" v_color_b="#0060b6" v_color_f="#75cfff" v_color_content="#fff" v_size="120" v_border="12" v_data="70" v_animate_speed="20"></circle-component>
		<br/>
		<circle-component ref="cp4" v_color_b="#0060b6" v_color_f="#75cfff" v_color_content="#fff" v_size="200" v_border="16" v_data="90" v_animate_speed="20"></circle-component>
		<br/>
		<circle-component ref="cp5" v_color_b="#0060b6" v_color_f="#75cfff" v_color_content="#fff" v_size="200" v_border="16" v_data="90" v_animate_speed="50"></circle-component>
	</div>
	<!-- 调用执行动画方法 -->
	<script type="text/javascript">
		window.onload=function(){
			app_circle_group.$refs.cp1.animate()
			app_circle_group.$refs.cp2.animate()
			app_circle_group.$refs.cp3.animate()
			app_circle_group.$refs.cp4.animate()
			app_circle_group.$refs.cp5.animate()
		}
	</script>


	<!-- source code -->
	<script type="text/javascript">
		Vue.component('circle-component', {
		    template: '<div v-bind:style="box.style"><div v-bind:style="leftCircle.style"></div><div v-bind:style="rightCircle.style"></div><div v-bind:style="content.style">{{content.text}}%</div></div>',
		    props:['v_color_b','v_color_f','v_size','v_data','v_border','v_color_content','v_animate_speed'],
		    data:function(){
			  	return{
			  		box:{
						style:{'width':this.v_size+'px','height':this.v_size+'px','borderRadius':'50%','backgroundColor':this.v_color_b,'position':'relative'}
					},
					content:{
						style:{'width':this.v_size-this.v_border*2+'px','height':this.v_size-this.v_border*2+'px','borderRadius':'50%','backgroundColor':this.v_color_content,'position':'absolute','left':this.v_border+'px','top':this.v_border+'px','fontSize':this.v_size*0.3+'px','textAlign':'center','lineHeight':this.v_size-this.v_border*2+'px'},
						text:0
					},
					leftCircle:{
						style:{'width':this.v_size+'px','height':this.v_size+'px','borderRadius':'50%','backgroundColor':this.v_color_f,'position':'absolute','left':'0px','top':'0px','clip':'rect(0px '+this.v_size/2+'px'+' '+this.v_size+'px'+' 0px)','transition':'','transform':'rotate(0deg)'}
					},
					rightCircle:{
						style:{'width':this.v_size+'px','height':this.v_size+'px','borderRadius':'50%','backgroundColor':this.v_color_f,'position':'absolute','left':'0px','top':'0px','clip':'rect(0px '+this.v_size+'px'+' '+this.v_size+'px'+' '+this.v_size/2+'px)','transition':'','transform':'rotate(0deg)'}
					}
			  	}
			},
			methods:{
				animate:function(){
					if(this.v_data<=50){
						this.rightCircle.style.transition = 'all '+this.v_data*this.v_animate_speed/1000+'s linear'
						setTimeout(function(){this.rightCircle.style.transform = 'rotate('+this.v_data/100*360+'deg)'}.bind(this))
						var inter = setInterval(function(){
							this.content.text += 1
							if(this.content.text == this.v_data){
								clearInterval(inter)
							}
						}.bind(this),this.v_animate_speed)
					}else{
						this.rightCircle.style.transition = 'all '+50*this.v_animate_speed/1000+'s linear'
						this.leftCircle.style.transition = 'all '+(this.v_data-50)*this.v_animate_speed/1000+'s linear'
						setTimeout(function(){this.rightCircle.style.transform = 'rotate(180deg)'}.bind(this))
						setTimeout(function(){
							this.rightCircle.style.transition = 'none'
							this.rightCircle.style.transform = 'rotate(0deg)'
							this.rightCircle.style.backgroundColor = this.v_color_b
							this.leftCircle.style.transform = 'rotate('+((this.v_data-50)/100*360)+'deg)'
						}.bind(this),50*this.v_animate_speed)
						var inter = setInterval(function(){
							this.content.text += 1
							if(this.content.text == this.v_data){
								clearInterval(inter)
							}
						}.bind(this),this.v_animate_speed)
					}
				}
			}
		})
		var app_circle_group = new Vue({
			el:'#app_circle_group',
			components: 'circle-component'
		})
	</script>
	<!-- source code end -->
</body>
</html>